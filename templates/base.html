<!DOCTYPE html>
<html lang="en" class="dark">
<head>
   
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}LearnFlow AI{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    {% if user.is_authenticated %}
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9564790727166506"
     crossorigin="anonymous"></script>
    {% endif %}
   
     <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "What is LearnFlow AI?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "LearnFlow AI is a multilingual educational platform offering quizzes, books, and videos for African educators and students."
        }
      }]
    }
    </script>
    

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "EducationalOrganization",
      "name": "LearnFlow AI",
      "url": "https://learnflow-ai-0fdz.onrender.com",
      "logo": "https://learnflow-ai-0fdz.onrender.com/static/logo.png",
      "sameAs": [
        "https://twitter.com/learnflowai",
        "https://facebook.com/learnflowai"
      ],
      "description": "LearnFlow AI empowers educators across Africa with multilingual quizzes, books, and videos."
    }

   </script>


    <style>

        
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        
        /* ðŸ”¥ MODERN MOBILE DRAWER STYLES ðŸ”¥ */
        #mobile-menu {
            /* Full-screen overlay */
            display: none; /* Controlled by JS active class */
            position: fixed; /* Fixed position to cover viewport */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000; /* High z-index to cover everything */
            /* Add a semi-transparent backdrop for visual focus */
            background-color: rgba(0, 0, 0, 0.7); 
            /* Enable transition for smooth reveal */
            transition: opacity 0.3s ease-in-out;
            opacity: 0;
            overflow-y: auto; /* Enable scrolling for long menus */
            padding: 0; /* Remove padding from container */
        }
        
        /* The actual drawer content that slides in */
        #mobile-menu-content {
            /* Slide in from the left/right - I'll use a slide-in from the left */
            position: absolute;
            top: 0;
            right: 0; /* Align to the right for a side-drawer effect */
            width: 80%; /* Takes up 80% of the screen width */
            max-width: 300px; /* Cap the width for large phones */
            height: 100%;
            background-color: #1e293b; /* slate-800 - The drawer's main background */
            transform: translateX(100%); /* Start off-screen to the right */
            transition: transform 0.3s ease-in-out;
            box-shadow: -4px 0 20px rgba(0, 0, 0, 0.5); /* Shadow for depth */
        }

        /* Active state for the full-screen overlay */
        #mobile-menu.active {
            display: block;
            opacity: 1;
        }
        
        /* Active state for the content to slide it into view */
        #mobile-menu.active #mobile-menu-content {
            transform: translateX(0); /* Slide fully into view */
        }


        
        /* Hidden on desktop */
        #mobile-menu-button {
            display: block;
        }
        @media (min-width: 768px) {
            #mobile-menu-button, #mobile-menu {
                display: none;
            }
            #nav-links {
                display: flex;
            }
        }
    </style>
</head>
<body class="bg-slate-900 text-gray-200 min-h-screen flex flex-col">

    <nav class="bg-slate-800 p-4 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center relative">
            <a href="{% url 'aiapp:home' %}" class="text-2xl font-bold text-indigo-500">LearnFlow AI</a>

            <button id="mobile-menu-button" class="text-gray-400 focus:outline-none md:hidden" aria-label="Toggle mobile menu">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu">
                    <line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>
                </svg>
            </button>

            <div id="nav-links" class="hidden md:flex items-center md:space-x-6">
                <a href="{% url 'legalpages:overview' %}" class="text-gray-300 hover:text-white transition-colors">Overview</a>
                <a href="{% url 'video:video_list' %}" class="text-gray-300 hover:text-white transition-colors">Videos</a>
                <a href="{% url 'legalpages:video_analysis' %}" class="text-gray-300 hover:text-white transition-colors">AI Video Analysis</a>
                <a href="{% url 'aiapp:quiz_list' %}" class="text-gray-300 hover:text-white transition-colors">Quizzes</a>
                <a href="{% url 'book:book_list' %}" class="text-gray-300 hover:text-white transition-colors">Books</a>
              
               
                
                {% if user.is_authenticated %}
                <a href="{% url 'aiapp:teacher_quiz_dashboard' %}" class="text-gray-300 hover:text-white transition-colors">My Dashboard</a>
                <a href="{% url 'aiapp:create_quiz' %}" class="text-gray-300 hover:text-white transition-colors">Create Quiz</a>
                <a href="{% url 'aiapp:user_profile' user.id %}" class="text-gray-300 hover:text-white transition-colors">My Profile</a>
                
                <form action="{% url 'user:logout' %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="px-4 py-2 bg-rose-600 text-white rounded-full hover:bg-rose-700 transition-colors shadow-sm font-semibold">
                        Logout
                    </button>
                </form>
                {% else %}
                <a href="{% url 'user:login' %}" class="px-4 py-2 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 transition-colors shadow-sm font-semibold">
                    Login
                </a>
                {% endif %}
            </div>
        </div>

        <div id="mobile-menu" class="md:hidden">
            <div id="mobile-menu-content" class="p-6">
                <div class="flex justify-end mb-6">
                    <button id="mobile-menu-close-button" class="text-gray-400 hover:text-white focus:outline-none" aria-label="Close mobile menu">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x">
                            <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
                        </svg>
                    </button>
                </div>
                
                <div class="space-y-4 border-b border-slate-700 pb-4 mb-4">
                    <a href="{% url 'legalpages:overview' %}" class="text-gray-300 hover:text-white transition-colors">Overview</a>
                    <!-- New Link to the AI Video Analysis App (learnflow.html) -->
                    <a href="{% url 'legalpages:video_analysis' %}" class="block py-2 px-4 rounded-lg text-white bg-slate-700 transition-colors flex items-center text-lg font-medium">
                       <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bot mr-3"><path d="M12 8V4"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M7 15h10"/><path d="M8 9v2"/><path d="M16 9v2"/></svg>
                       AI Video Analysis
                    </a>
                    <a href="{% url 'video:video_list' %}" class="block py-2 px-4 rounded-lg text-gray-300 hover:text-white hover:bg-slate-700 transition-colors flex items-center text-lg font-medium">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-play-circle mr-3"><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></svg>
                        Videos
                    </a>
                    <a href="{% url 'aiapp:quiz_list' %}" class="block py-2 px-4 rounded-lg text-gray-300 hover:text-white hover:bg-slate-700 transition-colors flex items-center text-lg font-medium">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard-list mr-3"><rect width="8" height="4" x="8" y="2"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></svg>
                        Quizzes
                    </a>
                    <a href="{% url 'book:book_list' %}" class="block py-2 px-4 rounded-lg text-gray-300 hover:text-white hover:bg-slate-700 transition-colors flex items-center text-lg font-medium">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-text mr-3"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/><path d="M8 8h6"/><path d="M8 12h8"/></svg>
                        
                        Books
                    </a>
                </div>
                
                {% if user.is_authenticated %}
                <div class="space-y-4">
                    <a href="{% url 'aiapp:teacher_quiz_dashboard' %}" class="block py-2 px-4 rounded-lg text-gray-300 hover:text-white hover:bg-slate-700 transition-colors flex items-center font-medium">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-layout-dashboard mr-3"><rect width="7" height="9" x="3" y="3" rx="1"/><rect width="7" height="5" x="14" y="3" rx="1"/><rect width="7" height="9" x="14" y="12" rx="1"/><rect width="7" height="5" x="3" y="16" rx="1"/></svg>
                        My Dashboard
                    </a>
                    <a href="{% url 'aiapp:create_quiz' %}" class="block py-2 px-4 rounded-lg text-gray-300 hover:text-white hover:bg-slate-700 transition-colors flex items-center font-medium">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-plus mr-3"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="12" x2="12" y1="18" y2="12"/><line x1="9" x2="15" y1="15" y2="15"/></svg>
                        Create Quiz
                    </a>
                    <a href="{% url 'aiapp:user_profile' user.id %}" class="block py-2 px-4 rounded-lg text-gray-300 hover:text-white hover:bg-slate-700 transition-colors flex items-center font-medium">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-circle mr-3"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="10" r="3"/><path d="M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"/></svg>
                        My Profile
                    </a>
                    
                    <form action="{% url 'user:logout' %}" method="post" class="mt-4 pt-4 border-t border-slate-700">
                        {% csrf_token %}
                        <button type="submit" class="w-full px-4 py-3 bg-rose-600 text-white rounded-xl hover:bg-rose-700 transition-colors shadow-lg font-semibold text-center text-lg">
                            Logout
                        </button>
                    </form>
                </div>
                {% else %}
                <div class="mt-4 pt-4 border-t border-slate-700">
                    <a href="{% url 'user:login' %}" class="w-full px-4 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-colors shadow-lg font-semibold text-center block text-lg">
                        Login
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
        </nav>

    <main class="container mx-auto p-4 flex-grow">
        {% if messages %}
            <div class="mb-4">
                {% for message in messages %}
                    <div class="p-3 mb-2 rounded-md font-medium text-sm {% if message.tags %}bg-{{ message.tags }}-800 text-{{ message.tags }}-300{% else %}bg-green-800 text-green-300{% endif %}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}

        {% block content %}
        {% endblock %}
    </main>

    <script>
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenuCloseButton = document.getElementById('mobile-menu-close-button'); // New element

        // Function to open the menu
        function openMenu() {
            mobileMenu.classList.add('active');
            // Prevent body scrolling when the menu is open
            document.body.style.overflow = 'hidden'; 
        }

        // Function to close the menu
        function closeMenu() {
            mobileMenu.classList.remove('active');
            // Re-enable body scrolling
            document.body.style.overflow = '';
        }

        // Toggle logic remains, but uses the new functions
        mobileMenuButton.addEventListener('click', () => {
            if (mobileMenu.classList.contains('active')) {
                closeMenu();
            } else {
                openMenu();
            }
        });

        // Close when the 'X' button is clicked
        mobileMenuCloseButton.addEventListener('click', closeMenu);

        // Close when clicking the backdrop (outside the drawer content)
        mobileMenu.addEventListener('click', (event) => {
            // Check if the click target is the overlay itself, not a child element within the drawer content
            if (event.target === mobileMenu) {
                closeMenu();
            }
        });
        
        // OPTIONAL: Close menu on escape key press for better accessibility
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape' && mobileMenu.classList.contains('active')) {
                closeMenu();
            }
        });

        // OPTIONAL: Enhanced button styles (Login/Logout)
        // Note: The classes are already applied in HTML, but ensuring they are prominent.
    </script>

    {% block extra_js %}
    {% endblock %}
</body>
</html>
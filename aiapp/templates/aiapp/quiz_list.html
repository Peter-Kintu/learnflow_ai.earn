{% extends "base.html" %}

{% block title %}Available Quizzes{% endblock %}

{% block content %}
<!-- Main content container, centered and responsive -->
<div class="max-w-4xl mx-auto p-8 bg-slate-800 rounded-2xl shadow-lg w-full mt-10 relative">

    <!-- Back button for navigation if needed -->
    <!-- This can be uncommented if you want a back button on this page. -->
    <!--
    <a href="{% url 'aiapp:home' %}" class="absolute top-4 left-4 text-gray-400 hover:text-indigo-500 transition-colors flex items-center space-x-2 font-medium">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
        <span>Back</span>
    </a>
    -->

    <!-- Page heading and description -->
    <h2 class="text-3xl font-bold text-gray-200 mb-2 text-center">Available Quizzes</h2>
    <p class="text-center text-gray-400 mb-8">
        Select a quiz to begin your practice or assessment.
    </p>

    <!-- Display Django messages if any exist -->
    {% if messages %}
        <div class="mb-4">
            {% for message in messages %}
            <div class="p-4 rounded-xl text-center {% if message.tags %} bg-{{ message.tags }}-600/50 text-{{ message.tags }}-200 {% endif %}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
    {% endif %}

    <!-- Quiz list container -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {% if quizzes %}
            {% for quiz in quizzes %}
                <!-- Quiz card item, linked to the quiz detail page -->
                <a href="{% url 'aiapp:quiz_detail' quiz.id %}" class="block bg-slate-700 p-6 rounded-xl shadow-inner hover:bg-slate-600 transition-colors duration-200 group">
                    <h3 class="text-xl font-semibold text-gray-200 mb-2 group-hover:text-indigo-400 transition-colors">{{ quiz.title }}</h3>
                    <p class="text-gray-400 text-sm mb-4 line-clamp-2">{{ quiz.description }}</p>
                    
                    <!-- Metadata for the quiz -->
                    <div class="flex items-center text-xs text-gray-500">
                        <!-- User Icon SVG -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user mr-1"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                        <span>Created by {{ quiz.teacher.get_full_name|default:quiz.teacher.username }}</span>

                        <!-- Calendar Icon SVG -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar-days ml-4 mr-1"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/></svg>
                        <span>{{ quiz.created_at|date:"F j, Y" }}</span>
                    </div>
                </a>
            {% endfor %}
        {% else %}
            <!-- Message displayed when no quizzes are available -->
            <div class="text-center md:col-span-2 p-8 bg-slate-700 rounded-xl shadow-inner">
                <p class="text-gray-400 text-lg">No quizzes are currently available.</p>
                <!-- Link for teachers to create a new quiz -->
                {% if user.is_authenticated and user.is_staff %}
                    <p class="text-gray-500 mt-2">As a teacher, you can create one now!</p>
                    <a href="{% url 'aiapp:create_quiz' %}" class="inline-block mt-4 px-6 py-3 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 transition-colors shadow-lg font-semibold">
                        Create a Quiz
                    </a>
                {% endif %}
            </div>
        {% endif %}
    </div>

</div>
{% endblock %}

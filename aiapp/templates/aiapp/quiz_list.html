{% extends "base.html" %}

{% block title %}Available Quizzes{% endblock %}

{% block content %}

<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-10 bg-slate-800 rounded-2xl shadow-lg">
 
  <h2 class="text-3xl font-bold text-gray-200 mb-2 text-center">Available Quizzes</h2>
  <p class="text-center text-gray-400 mb-8">
    Select a quiz to begin your practice or assessment, or generate your own using AI.
  </p>

  <div class="flex justify-center mb-8">
    <a href="https://galeindelicatedrove.com/xa0dwpgpev?key=69191c2b5ac00672ced97515583f6477"
   target="_blank" rel="nofollow"
   class="inline-block mt-4 px-6 py-3 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors shadow-lg font-semibold">
   Discover More Offers
</a>
    <script type="text/javascript">
        atOptions = {
            'key' : '7f6534d747d7fc18ada93341f5afacd2',
            'format' : 'iframe',
            'height' : 60,
            'width' : 468,
            'params' : {}
        };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/7f6534d747d7fc18ada93341f5afacd2/invoke.js"></script>
  </div>

  <div class="bg-slate-700 p-6 rounded-xl shadow-inner mb-10 text-center">
    <h3 class="text-xl font-semibold text-gray-200 mb-4">Generate a Personalized Quiz</h3>
    <p class="text-gray-400 mb-6">Can't find what you need? Use LearnFlow AI to create a custom quiz on any topic!</p>
    <a href="{% url 'aiapp:ai_quiz_generator' %}" class="inline-flex items-center px-8 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-semibold shadow-lg">
      <svg class="mr-2" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M9.9 22H21"/><path d="M12.8 2.1c.8-.7 2-.7 2.8 0L20 6l3.1 3.9c.8.7.8 1.9 0 2.6L20 16l-4.4 3.9c-.8.7-2 .7-2.8 0L8 16l-4.4-3.9c-.8-.7-.8-1.9 0-2.6L8 6z"/></svg>
      Start AI Quiz Generator
    </a>
    
  </div>

  {% if messages %}
    <div class="mb-6">
      {% for message in messages %}
      
        <div class="p-4 rounded-xl text-center {% if message.tags %} bg-{{ message.tags }}-600/50 text-{{ message.tags }}-200 {% endif %}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <h3 class="text-2xl font-bold text-gray-200 mb-6 border-t border-slate-700 pt-6">Teacher-Created Quizzes</h3>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    {% if quizzes %}
      {% for quiz in quizzes %}
        <a href="{% url 'aiapp:quiz_detail' quiz.id %}" class="block bg-slate-700 p-6 rounded-xl shadow-inner hover:bg-slate-600 transition-colors duration-200 group">
          <h3 class="text-xl font-semibold text-gray-200 mb-2 group-hover:text-indigo-400 transition-colors">{{ quiz.title }}</h3>
          <p class="text-gray-400 text-sm mb-4 line-clamp-2">{{ quiz.description }}</p>
          <div class="flex items-center text-xs text-gray-500 flex-wrap gap-x-4">
            {% if quiz.teacher %}
              <span class="flex items-center">
                <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                Created by {{ quiz.teacher.get_full_name|default:quiz.teacher.username }}
              </span>
            {% else %}
              <span class="flex items-center text-red-400">
                <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><line x1="17" x2="22" y1="17" y2="22"/><line x1="22" x2="17" y1="17" y2="22"/></svg>
                Creator unknown
              </span>
            {% endif %}
            <span class="flex items-center">
              <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/></svg>
              {{ quiz.created_at|date:"F j, Y" }}
            </span>
          </div>
        </a>
      {% endfor %}
    {% else %}
      <div class="text-center md:col-span-2 p-8 bg-slate-700 rounded-xl shadow-inner">
        <p class="text-gray-400 text-lg">No quizzes are currently available.</p>
        {% if user.is_authenticated and user.is_staff %}
          <p class="text-gray-500 mt-2">As a teacher, you can create one now!</p>
          <a href="{% url 'aiapp:create_quiz' %}" class="inline-block mt-4 px-6 py-3 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 transition-colors shadow-lg font-semibold">
            Create a Quiz
          </a>
        {% endif %}
      </div>
    {% endif %}
  </div>

</div>
{% endblock %}
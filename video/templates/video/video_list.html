{% extends "base.html" %}

{% block title %}Available Videos{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto p-8 bg-slate-800 rounded-2xl shadow-lg mt-10">
    <!-- Header section with title and upload button -->
    <div class="flex justify-between items-center mb-6">
        <h2 class="text-3xl font-bold text-gray-200">Available Videos</h2>
        {% if user.is_authenticated %}
        <a href="{% url 'video:create_video' %}" class="px-6 py-2 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 transition-colors shadow-lg font-semibold flex items-center space-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
            <span>Upload Video</span>
        </a>
        {% endif %}
    </div>
    <p class="text-gray-400 mb-8">Browse educational videos uploaded by your teachers.</p>
    
    <!-- Video grid container -->
    <div class="grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3">
        {% for video in videos %}
        <a href="{% url 'video:video_detail' video.id %}" class="block bg-slate-700 p-4 rounded-xl shadow-md transition-transform hover:scale-105 hover:bg-slate-600">
            <div class="aspect-w-16 aspect-h-9 mb-4 overflow-hidden rounded-lg">
                <!-- Placeholder for the video thumbnail or embed code -->
                <!-- In a real application, you would replace the div below with an <img> tag pointing to the video thumbnail. -->
                <div class="w-full h-full bg-slate-600 flex items-center justify-center text-gray-400">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-play-square"><rect width="18" height="18" x="3" y="3" rx="2"/><polygon points="10 8 16 12 10 16 10 8"/></svg>
                </div>
            </div>
            <h3 class="text-xl font-semibold text-gray-200 mb-2">{{ video.title }}</h3>
            <p class="text-sm text-gray-400 mb-4">{{ video.description|default:"No description available."|truncatechars:100 }}</p>
            <div class="flex items-center justify-between text-xs text-gray-500">
                <span class="flex items-center space-x-1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                    <span>{{ video.teacher.get_full_name|default:video.teacher.username }}</span>
                </span>
                <span class="flex items-center space-x-1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar-days"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/></svg>
                    <span>{{ video.created_at|date:"M d, Y" }}</span>
                </span>
            </div>
        </a>
        {% empty %}
        <!-- Message displayed if no videos are available -->
        <p class="text-gray-400">No videos are available yet. Check back later!</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
